<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://bootswatch.com/4/journal/bootstrap.min.css">
    <title>My Properties</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-info">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      </button>
        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="http://localhost:9292/browse">PROPERTY LIST <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="http://localhost:9292/pendingapproval">PENDING BOOKINGS <span class="sr-only">(current)</span></a>
            </li>
          </ul>
          <form action="/logout" method="post">
            <input type="submit" value="Logout" class="button">
          </form>
        </div>
    </nav>
    <p style="background: white; text-align: center; color: red;"><%= flash[:notice] %></p>
    <br>
    <div class="col-md-4 mx-auto">
      <% @property_list.each do |property| %>
      <% if property.property_owner_id == @user_id %>
      <div class="card mb-3">
        <h3 class="card-header"><%= property.name %></h3>
        <div class="card-body">
          <h5 class="card-title"><%= property.location %></h5>
          <h6 class="card-subtitle text-muted">Â£<%= property.price %> per night</h6>
        </div>
        <img style="height: 200px; width: 100%; display: block;" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22318%22%20height%3D%22180%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20318%20180%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_158bd1d28ef%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A16pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_158bd1d28ef%22%3E%3Crect%20width%3D%22318%22%20height%3D%22180%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22129.359375%22%20y%3D%2297.35%22%3EImage%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" alt="Card image">
        <div class="card-body"></div>
        <div class="card-footer text-muted">
          <div>
            <form action="/deleteproperty" method="post">
              <input type="hidden" name="property_id" value="<%= property.id %>" >
              <input type="submit" value="DELETE" class="btn btn-outline-info btn-block">
            </form>
          </div>
        </div>
        </div>
        <% end %>
        <% end %>

     <br>
     <hr>
     <br>

      <div style="background: #fcfaf9; padding: 5px;">
        <h2>ADD NEW PROPERTY</h2>
        <small><b>ENTER PROPERTY DETAILS:</b></small>
        <br>
        <br>
        <form action="/add_property" method="post">
          <input type="hidden" name="prop_owner_id" value="<%= @user_id %>">
           <div class="form-group">
             <input type="text" class="form-control" name="name" placeholder="Property name">
           </div>
           <div class="form-group">
             <input type="text" class="form-control" name="description" placeholder="Description">
           </div>
           <div class="form-group">
             <input type="text" class="form-control" name="location" placeholder="Location">
           </div>
           <div class="form-group">
             <input type="text" class="form-control" name="price" placeholder="Price">
           </div>
           <div class="form-group">
              <input type="file" class="form-control-file" aria-describedby="fileHelp">
              <small id="fileHelp" class="form-text text-muted">Upload property images you wish to be displayed</small>
           </div>
           <br>
           <div>
             <input type="submit" value="ADD TO MY PROPERTIES" class="btn btn-outline-info btn-block">
           </div>
        </form>
      </div>
      <hr>
    </div>

  </body>
</html>
